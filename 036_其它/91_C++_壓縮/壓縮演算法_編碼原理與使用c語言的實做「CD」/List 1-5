#include<stdio.h>

int decode(FILE *fp);

/* main”ŸÉ */
int main(int ac,char *av[])
{
    FILE *fp;

    if ((fp = fopen(av[1],"rb"))==NULL)
        return 6;

    decode(fp);

    fclose(fp);
    return 0;
}

/* ‰ğšØk™|—å’ö® */
int decode(FILE *fp)
{
    int i;
    int c1;
    int run,code;

    while(!feof(fp)) {
        c1=fgetc(fp);
        if(c1==EOF) break;
        if(c1==0xff) {        /* run’·“x */
            run=fgetc(fp);
            if(run==EOF) break;
            code=fgetc(fp);
            if(code==EOF) break;
            for(i=0;i<run;i++) {
                fputc(code,stdout);
            }
        }
        else {                /* ˆê”Ê“Iáù */
            fputc(c1,stdout);
        }
    }
    return 0;
}
