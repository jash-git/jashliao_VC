<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>


  
  <link rel="stylesheet" href="stdlayout.css" tppabs="http://caterpillar.onlyfun.net/Gossip/CppGossip/css/stdlayout.css" type="text/css">


  
  <link rel="stylesheet" href="print.css" tppabs="http://caterpillar.onlyfun.net/Gossip/CppGossip/css/print.css" type="text/css">


  
  <meta content="text/html; charset=Big5" http-equiv="content-type">

  
  <title>使用 string 型態</title>
</head>


<body>


<h3><a href="javascript:if(confirm('http://caterpillar.onlyfun.net/Gossip/index.html  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://caterpillar.onlyfun.net/Gossip/index.html'" tppabs="http://caterpillar.onlyfun.net/Gossip/index.html">From
Gossip@caterpillar</a></h3>


<h1><a href="CppGossip.html" tppabs="http://caterpillar.onlyfun.net/Gossip/CppGossip/CppGossip.html">C++ Gossip: 使用 string 型態</a></h1>


<table style="text-align: left; width: 946px; height: 32px;" border="0" cellpadding="0" cellspacing="0">


  <tbody>


    <tr>


      <td style="width: 676px; vertical-align: top;"> <small>
直接操作字元陣列來進行字串操作是比較低階的行為，就如之前所說的，陣列本身對自己的長度沒有意識，所以無法判斷自己是否為空字串，而陣列也不能直接指定
給另一個陣列，所以您無法直接將字串指定給另一個字串，您也無法對兩個字串直接進行串連的動作，例如：<br>

      </small>
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">char
str1[] = "text1";</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">


      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">char
str2[] = "text2";</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">


      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">str1
=
str2; // error</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">


      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">cout
&lt;&lt; str1 + str2 &lt;&lt; endl; // error</span><br>


      </small></div>


      <small><br>


C++標準函式庫提供了string類別，您可以使用這個類別來建立實例，並進行各項高階的字串抽象行為，像是字串的指定、串接等，要使用string類
別，您要先含入string表頭檔：<br>

      </small>
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">#include
&lt;string&gt;</span><br>


      </small></div>


      <small><br>


您可以使用三種方式來建立一個string類別的物件（object），例如：<br>

      </small>
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">string
str1;&nbsp; // 建立一個string物件，內容為空字串</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">


      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">string
str2("caterpillar"); &nbsp;// 以字串常量建立字串</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">


      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">string
str3(str2); // 以string實例建立字串</span><br>


      </small></div>


      <small><br>


第一個建構字串的方法會建立一個空字串，空字串也是字串，只是長度為0；第二個方法會以字面常量內容來建立string實例；第三個方法會「複製」
str2的內容，並建立一個新的string實例。<br>

      <br>


您可以使用size()來測試字串長度，使用empty()來測試字串是否為空，使用==來比較兩個字串的字元內容是否相同，例如：</small>
      <br>


      <br>


      
      <pre>#include &lt;iostream&gt; <br>#include &lt;string&gt; <br>using namespace std; <br><br>int main() { <br>    string str1; <br>    string str2("caterpillar"); <br>    string str3(str2); <br> <br>    if(str1.empty()) {<br>        cout &lt;&lt; "str1 為空字串" &lt;&lt; endl;<br>    }<br> <br>    cout &lt;&lt; "str1 長度: " &lt;&lt; str1.size() &lt;&lt; endl;<br>    cout &lt;&lt; "str2 長度: " &lt;&lt; str2.size() &lt;&lt; endl;<br>    cout &lt;&lt; "str3 長度: " &lt;&lt; str3.size() &lt;&lt; endl;<br> <br>    if(str1 == str2) {<br>        cout &lt;&lt; "str1 與 str2 內容相同" &lt;&lt; endl;<br>    }<br><br>    if(str3 == str2) {<br>        cout &lt;&lt; "str3 與 str2 內容相同" &lt;&lt; endl;<br>    }<br> <br>    return 0; <br>}</pre>


      <br>


      <small><span class="postbody">執行結果：</span></small><br>


      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">


        <tbody>


          <tr>


            <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);">str1 為空字串<br>


str1 長度: 0<br>


str2 長度: 11<br>


str3 長度: 11<br>


str3 與 str2 內容相同</span></small><span style="color: rgb(255, 255, 255);"><br>


            </span></td>


          </tr>


        
        </tbody>
      
      </table>


      <br>

      <small>
您可以將字串指定給另一個字串，例如：<br>

      </small>
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">string
str1("text1");</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">


      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">string
str2("text2");</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">


      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">....</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">


      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">str1
= str2;</span><br>


      </small></div>


      <small><br>


這個指定會將str1原本的字串記憶體空間釋放，並重新配置足夠容納str2的記憶體空間，然後將str2的各個字元複製至str1；您也可以將一個C-
Style的字串指定給string，例如：<br>

      </small>
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">string
name("caterpillar");</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">


      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">char
str[] =
"justin";</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">


      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">name
= str;</span><br>


      </small></div>


      <small><br>


但是您不能將一個string實例指定給字元陣列，例如：<br>

      </small>
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-style: italic;"></span><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">char
str[] = "justin";</span><br style="font-family: Courier New,Courier,monospace;">


      </small></div>


      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">string
name("caterpillar");</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">


      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">str
= name; //
error</span><br>


      </small></div>


      <small><br>

      <br>


您也可以直接使用+運算子來串接字串，例如：<br>

      </small>

      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">str1
= str1 + str2;</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">


      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">str1
= str1 + "\n";</span><br>


      </small></div>


      <small><br>


string的實例可以使用下標運算子[ ]指定索引來存取相對應位置的字元，就有如字元陣列的操作一般，例如：</small><br>


      <br>


      
      <pre>#include &lt;iostream&gt; <br>#include &lt;string&gt; <br>using namespace std; <br><br>int main() { <br>    string name("caterpillar");<br> <br>    for(int i = 0; i &lt; name.size(); i++) {<br>        cout &lt;&lt; name[i] &lt;&lt; endl;<br>    }<br> <br>    return 0; <br>}<br></pre>


      <br>


      <small><span class="postbody">執行結果：</span></small><br>


      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">


        <tbody>


          <tr>


            <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);">c<br>


a<br>


t<br>


e<br>


r<br>


p<br>


i<br>


l<br>


l<br>


a<br>


r</span></small><span style="color: rgb(255, 255, 255);"><br>


            </span></td>


          </tr>


        
        </tbody>
      
      </table>


      <br>

      <small>
string類別所生成的物件擁有幾個常用的方法（method），例如： </small><br>


      <br>


      
      <pre>#include &lt;iostream&gt; <br>#include &lt;string&gt; <br>using namespace std; <br><br>int main() { <br>    string str1; <br>    string str2("caterpillar"); <br>    string str3(str2); <br><br>    // assign: 指定字串 <br>    str1 = str1.assign(str2, 0, 5); <br>    cout &lt;&lt; "str1: " &lt;&lt; str1 &lt;&lt; endl; <br>    str1 = str1.assign("caterpillar", 5, 6); <br>    cout &lt;&lt; "str1: " &lt;&lt; str1 &lt;&lt; endl; <br><br>    str1 = ""; <br><br>    // append: 字串串接 <br>    str1 = str1.append(str2, 0, 5); <br>    str1 = str1.append(str3, 5, 6); <br>    cout &lt;&lt; "str1: " &lt;&lt; str1 &lt;&lt; endl; <br><br>    // find: 尋找字串位置 <br>    cout &lt;&lt; "尋找str1中的第一個pill: " <br>         &lt;&lt; str1.find("pill", 0) &lt;&lt; endl; <br><br>    // insert: 插入字串 <br>    cout &lt;&lt; "在str1插入字串***: " <br>         &lt;&lt; str1.insert(5, "***") &lt;&lt; endl; <br><br>    cout &lt;&lt; "str1長度: " &lt;&lt; str1.length() &lt;&lt; endl; <br> <br>    return 0; <br>}<br></pre>


      <br>


      <small><span class="postbody">執行結果：</span></small><br>


      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">


        <tbody>


          <tr>


            <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);">str1: cater<br>


str1: pillar<br>


str1: caterpillar<br>


尋找str1中的第一個pill: 5<br>


在str1插入字串***: cater***pillar<br>


str1長度: 14</span></small><span style="color: rgb(255, 255, 255);"><br>


            </span></td>


          </tr>


        
        </tbody>
      
      </table>


      <br>

      <small>
以下簡單的說明上面幾個使用到的方法： </small><br>


      <br>


      
      <table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">


        <tbody>


          <tr>


            <td style="background-color: rgb(204, 204, 204);"><small>方
法</small></td>


            <td style="background-color: rgb(204, 204, 204);"><small>說
明</small></td>


          </tr>


          <tr>


            <td><small>assign(string, start, num)</small></td>


            <td><small>從string的第start個字元取出num個字元來指定給另一字串物件。</small></td>


          </tr>


          <tr>


            <td><small>append(string, start, num)</small></td>


            <td><small>從string的第start個字元取出num個字元來附加至另一字串物件之後。</small></td>


          </tr>


          <tr>


            <td><small>find(string, 0)</small></td>


            <td><small>從引發find的字串物件第0個字元尋找是否有符合string的子字串。 </small></td>


          </tr>


          <tr>


            <td><small>insert(start, string)</small></td>


            <td><small>將string插入引發insert的字串物件第start個字元之後。</small></td>


          </tr>


          <tr>


            <td><small>length()</small></td>


            <td><small>傳回字串的長度。 </small></td>


          </tr>


        
        </tbody>
      
      </table>


      <br>

      <small>
以上的幾個方法都是重載（Overload）多次的方法，另還有其它的方法，例如compare()等等，更多的參數與方法使用請參考C++相關線上文
件。</small> </td>


      <td style="width: 250px; text-align: center; vertical-align: top;"><!-- adsense for content-->
      
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      
      <script type="text/javascript" src="show_ads.js" tppabs="http://pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>


<!-- adsense for content end--><br>


<!-- adsense for content-->
      
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      
      <script type="text/javascript" src="show_ads.js" tppabs="http://pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><!-- adsense for content end--></td>


    </tr>


  
  </tbody>
</table>


<br>

&nbsp;<br>


</body>
</html>
