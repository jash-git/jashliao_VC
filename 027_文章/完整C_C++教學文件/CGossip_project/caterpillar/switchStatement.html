<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>









  
  
  
  
  
  
  
  
  <link rel="stylesheet" href="stdlayout.css" tppabs="http://caterpillar.onlyfun.net/Gossip/CGossip/css/stdlayout.css" type="text/css">









  
  
  
  
  
  
  
  
  <link rel="stylesheet" href="print.css" tppabs="http://caterpillar.onlyfun.net/Gossip/CGossip/css/print.css" type="text/css">









  
  
  
  
  
  
  
  
  <meta content="text/html; charset=Big5" http-equiv="content-type">








  
  
  
  
  
  
  
  
  <title>switch 條件判斷</title>
</head>


<body>









<h3><a href="javascript:if(confirm('http://caterpillar.onlyfun.net/Gossip/index.html  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://caterpillar.onlyfun.net/Gossip/index.html'" tppabs="http://caterpillar.onlyfun.net/Gossip/index.html">From
Gossip@caterpillar</a></h3>









<h1><a href="CGossip.html" tppabs="http://caterpillar.onlyfun.net/Gossip/CGossip/CGossip.html">C&nbsp;Gossip: switch 條件判斷</a></h1>









<table style="text-align: left; width: 946px; height: 32px;" border="0" cellpadding="0" cellspacing="0">









  <tbody>









    <tr>









      <td style="width: 676px; vertical-align: top;"> <small>
switch是C提供的條件判斷陳述式，它只能比較數值或字元，不過別以為這樣它就比if
來得沒用，使用適當的話，它可比if判斷式來得有效率；switch的語法架構如下：<br>



      </small>
      
      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">switch
(變數名稱或運算式) { </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp; case 符合數字或字元: </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp; &nbsp; &nbsp; 陳述句一; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp; &nbsp; &nbsp; break; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp; case 符合數字或字元: </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp; &nbsp; &nbsp; 陳述句二; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp; &nbsp; &nbsp; break; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp; default: </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp; &nbsp; &nbsp; 陳述三; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">}</span><br>




      </small></div>




      <small><br>




首先看看switch的括號，當中置放您要取出數值的變數，取出數值之後，程式會開始與case中所設定的數字或字元作比對，如果符合就執行以下的陳述
句，直到遇到break後離開switch區塊，如果沒有符合的數值或字元，則會執行default後的陳述句，default不一定需要，您可以省去這
個部份。 <br>



      <br>




來看看上一個範例的成績等級比對如何使用switch來改寫： <br>

      </small>
      
      <pre>#include &lt;stdio.h&gt;<br><br>int main(void) {<br>    int score = 0; <br>    int level = 0; <br><br>    printf("輸入分數："); <br>    scanf("%d", &amp;score); <br>    level = score / 10; <br><br>    switch(level) { <br>        case 10: <br>        case 9: <br>            puts("得A");<br>            break; <br>        case 8: <br>            puts("得B");<br>            break; <br>        case 7: <br>            puts("得C");<br>            break; <br>        case 6: <br>            puts("得D");<br>            break; <br>        default: <br>            puts("得E（不及格）");<br>    } <br>    <br>    return 0;<br>}</pre>








      <span class="postbody"><br>

      </span><small>
執行結果：</small><br>




      <small> </small><small> </small><small>
      </small><small> </small><small>
      </small>
      
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">




        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);">輸入分數：85<br>




得B</span><span style="color: rgb(255, 255, 255);"></span></small></td>




          </tr>




        
        
        
        </tbody>
      
      
      
      </table>




      <br>



      <small>
在這個程式中，您使用除法並取得運算後的商數，如果大於90的話，除以10的商數一定是9或10（100分時），在case
10中沒有任何的陳述，也沒有使用break，所以會繼續往下執行，直到遇到break離開switch為止，所以學生成績100分的話，也會顯示A的成
績等級；如果比對的條件不在10到6這些值的話，會執行default下的陳述，這表示商數小於6，所以學生的成績等級就顯示為E了。 <br>



      <br>




注意在case後的等號是冒號而不是分號，這是個很常鍵錯的符號；如果您比對的是字元，則記得加上單引號（' '），例如： <br>



      </small>

      
      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">case
'A';</span><br>




      </small></div>




      <small><br>




這個程式與使用if來判斷成績等級的程式有何不同？如果純綷比對數字或字元的話，建議使用switch，因為它只會在一開始的switch括號中取出變數
值一次，然後將這個值與下面所設定的case比對，但如果您使用if的話，每次遇到條件式時，都要取出變數值，效率的差異就在這，例如： <br>



      </small>
      
      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">if(a
== 1) </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp; //
.... </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">else
if(a == 2) </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp; //
.... </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">else
if(a == 3) </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp; //
....</span><br>




      </small></div>




      <small><br>




這個程式片段中我們在最差的狀況下，也就是a = 3時，共需三次比對，而每次比對都必須取出變數a的值一次，如果換成switch的話：<br>



      </small>
      
      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">switch(a)
{ </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp; case
1: </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp;
&nbsp; &nbsp; // .. </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp;
&nbsp; &nbsp; break; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp; case
2: </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp;
&nbsp; &nbsp; // .. </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp;
&nbsp; &nbsp; break; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp; case
3: </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp;
&nbsp; &nbsp; // .. </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp;
&nbsp; &nbsp; break; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">}</span><br>




      </small></div>




      <small><br>




在這個程式片段中，只在一開頭switch的括號中取出變數a的值，然後逐一比對下面的case，效率的差別就在於這邊。 <br>



      <br>




當然並不是使用if就不好，遇到複合條件時，switch就幫不上忙了，您無法在switch中組合複雜的條件陳述，這時就得使用if了，簡單的說，if
與switch兩者可以搭配著靈活使用。 <br>



      <br>




如果您比對的是一個數值範圍，在gcc的C編譯器中還允許這樣的比對方式：<br>



      </small>


      
      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">switch(i)
{ </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp; case
1 ... 30: </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp;
&nbsp; &nbsp; // statements </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp; case
31 ... 1000: </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp;
&nbsp; &nbsp; // statements </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp;
default: </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp;
&nbsp; &nbsp; // statements </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">}</span><br>




      </small></div>




      <small><br>




如上所示範的，您可以使用...來設定一個範圍的數值，而不用連續的撰寫case來比對。 </small><br>

      <span class="postbody"><br>








      </span> </td>









      <td style="width: 250px; text-align: center; vertical-align: top;"><comment title=" adsense for content" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment>&nbsp;
      
      
      
      
      
      
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      
      
      
      
      
      
      <script type="text/javascript" src="show_ads.js" tppabs="http://pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>







      <comment title=" adsense for content end" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment><br>







      <comment title=" adsense for content" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment>
      
      
      
      
      
      
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->&#160;</script>&nbsp;
      
      
      
      
      
      
      <script type="text/javascript" src="show_ads.js" tppabs="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script><comment title=" adsense for content end" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment><br>







      <br>






      
      
      
      
      
      
      <center>
      
      
      
      
      
      
      <script language="javascript" src="showads.aspx-blogid=20070509000002&charset=big5" tppabs="http://ad2.bloggerads.net/showads.aspx?blogid=20070509000002&charset=big5"></script><br>







      </center>







 </td>









    </tr>









  
  
  
  
  
  
  
  
  </tbody>
</table>









<br>








<span class="postbody"><br>









<br>









</span>
<script src="urchin.js" tppabs="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-143766-1";
urchinTracker();
</script>
</body>
</html>
