<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>


  
  <link rel="stylesheet" href="stdlayout.css" tppabs="http://caterpillar.onlyfun.net/Gossip/CGossip/css/stdlayout.css" type="text/css">


  
  <link rel="stylesheet" href="print.css" tppabs="http://caterpillar.onlyfun.net/Gossip/CGossip/css/print.css" type="text/css">


  
  <meta content="text/html; charset=Big5" http-equiv="content-type">

  
  <title>字串（字元陣列）</title>
</head>


<body>


<h3><a href="javascript:if(confirm('http://caterpillar.onlyfun.net/Gossip/index.html  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://caterpillar.onlyfun.net/Gossip/index.html'" tppabs="http://caterpillar.onlyfun.net/Gossip/index.html">From
Gossip@caterpillar</a></h3>


<h1><a href="CGossip.html" tppabs="http://caterpillar.onlyfun.net/Gossip/CGossip/CGossip.html">C&nbsp;Gossip:
字串（字元陣列）</a></h1>


<table style="text-align: left; width: 946px; height: 32px;" border="0" cellpadding="0" cellspacing="0">


  <tbody>


    <tr>


      <td style="width: 676px; vertical-align: top;"> <small>在C
中字串的本質是由字元所組成的陣列，並在最後加上一個空（null）字元'\0'，例如下面這個程式就是一個"hello"字串的宣告：<br>


      </small>
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">char
str[] = {'h', 'e', 'l', 'l', 'o', '\0'};</span><br>


      </small></div>


      <small><br>


之後您可以直接使用str來代表該字串，例如在文字模式下輸出str字串：<br>


      </small>
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">printf(str);<br>


printf("%s\n", str);<br>


      </span> </small></div>


      <small><br>


C++是使用空字元來識別一個字元陣列是否表示字串，像上例就可以用來表示一個字串"hello"，在C++中您也可以這麼宣告字串：<br>


      </small>
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">char
str[] = "hello";</span><br>


      </small></div>


      <small><br>


在這個例子中，雖然您沒有指定空字元'\0'，但是程式會自動加上空字元，而它基本上還是字元陣列，與前一個宣告方式是相同的，您從下面這個程式就可以知
道：</small><br>


      <span class="postbody"></span>
      
      <pre>#include &lt;stdio.h&gt;<br><br>int main(void) {<br> char str[] = "hello"; <br> int length = sizeof(str)/sizeof(str[0]);<br> <br> int i;<br> for(i = 0; i &lt; length; i++) { <br> if(str[i] == '\0')<br> puts("null"); <br> else <br> printf("%c ", str[i]); <br> } <br> putchar('\n');<br> <br> return 0;<br>}</pre>


      <span class="postbody"><br>


      </span><small><span class="postbody">執行結
果：</span></small><br>


      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">


        <tbody>


          <tr>


            <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);">h e l l o null</span></small><span style="color: rgb(255, 255, 255);"><br>


            </span></td>


          </tr>


        
        </tbody>
      
      </table>


      <br>


      <small>字串是字元陣列，所以您可以使用陣列的存取方式取出每一個字元，在指定"hello"時表面上雖然只有5個字元，
但是最後會加上一個空字元'\0'，所以
str[]共使用了6個字元，由於字串的最後一個字元為空字元，所以您可以檢驗這個字元來看看字串是否為空，例如：<br>


      </small>
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">if(str[0]
== '\0') {</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">


      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp; puts("字串為空");</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">


      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">}</span><br>


      </small></div>


      <small><br>


空字元在作條件判斷時，會被視為0，所以上式還可以這麼寫：<br>


      </small>
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">if(
! str[0] ) {</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">


      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp; </span></small><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">puts
("字串為空");</span></small><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;"></span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">


      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">}</span><br>


      </small></div>


      <small><br>


字串一但指定，它的長度就固定了，也就是字元陣列的長度，所以您由使用者輸入取得字串值時，需注意不要超過字串的長度；從使用者輸入取得字串值只要這麼作
就可以了： <br>


      </small>
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">char
str[80];<br>


printf("輸入字串：");<br>


scanf("%s", str);<br>


printf("您輸入的字串為 %s\n", str);</span><span style="font-weight: bold; font-family: Courier New,Courier,monospace;"></span><br>


      </small></div>


      <small><br>


這個程式片段可以取得使用者的字串輸入，所輸入的字串長度不得超過80個字元，80個字元的上限包括空白字元，所以實際上可以輸入79個字元；如果輸入的
字元超出所宣告的上限，會發生不可預期的錯誤。 <br>


      <br>


在使用scanf()取得使用者輸入的字串時，格式指定字是使用%s，而變數前不用再加上&amp;，因為實際上，字串（字元陣列）變數名稱本
身，即表示記憶體位址資訊。<br>


      <br>


要指定新的字串值給它時，您不能像下面的方式指定： <br>


      </small>
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">char
str[80]; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">


      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">str
= "Just";</span><br>


      </small></div>


      <small><br>


而必須要一個字元一個字元的指定至陣列中，並在最後加上空白字元，例如： <br>


      </small>
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">char
str[80] = {'\0'}; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">


      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">str[0]
= 'J'; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">


      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">str[1]
= 'u'; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">


      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">str[2]
= 's'; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">


      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">str[3]
= 't'; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">


      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">str[4]
= '\0'; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">


      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">puts(str);</span><br>


      </small></div>


      <small><br>


這樣的字元指定方式當然相當的不方便，所以C提供了字串處理的相關函式，</small><small>可以協助您進行一些字串
處理，在之後的主題還會說明。<br>


      </small><small><br>


字串的宣告還有指標（Pointer）的宣告方式，這個留待談到指標時再來說明。</small><br>


      <span class="postbody"><br>


      </span> </td>


      <td style="width: 250px; text-align: center; vertical-align: top;"><comment title=" adsense for content" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment>&nbsp;
      
      
      
      
      
      
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      
      
      
      
      
      
      <script type="text/javascript" src="show_ads.js" tppabs="http://pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>







      <comment title=" adsense for content end" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment><br>







      <comment title=" adsense for content" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment>
      
      
      
      
      
      
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->&#160;</script>&nbsp;
      
      
      
      
      
      
      <script type="text/javascript" src="show_ads.js" tppabs="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script><comment title=" adsense for content end" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment><br>







      <br>






      
      
      
      
      
      
      <center>
      
      
      
      
      
      
      <script language="javascript" src="showads.aspx-blogid=20070509000002&charset=big5" tppabs="http://ad2.bloggerads.net/showads.aspx?blogid=20070509000002&charset=big5"></script><br>







      </center>







 </td>


    </tr>


  
  </tbody>
</table>


<br>


<span class="postbody"><br>


<br>


</span>
<script src="urchin.js" tppabs="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-143766-1";
urchinTracker();
</script>
</body>
</html>
