<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0087)http://msdn.microsoft.com/library/en-us/vclib/html/_mfc_cfile.3a3a.cfile.asp?frame=true -->
<!--TOOLBAR_EXEMPT--><HTML xmlns:tool = 
"http://www.microsoft.com/tooltip"><HEAD><TITLE>CFile::CFile (Visual C++ Libraries)</TITLE>
<META http-equiv=Content-Type content="text/html; charset=windows-1252">
<META 
content="The default constructor does not open a file but rather sets m_hFile to CFile::hFileNull." 
name=Description>
<META content="" name=Robots>
<META content="" name=Keywords>
<META content=en-us name=MS.LOCALE><LINK 
href="_mfc_cfile.3a3a.cfile.files/ie4.css" type=text/css rel=stylesheet><LINK 
href="_mfc_cfile.3a3a.cfile.files/ie5.css" type=text/css rel=stylesheet>
<STYLE>BODY {
	MARGIN: 0px; FONT-FAMILY: verdana,arial,helvetica
}
</STYLE>

<SCRIPT language=javascript 
src="_mfc_cfile.3a3a.cfile.files/dtuelink.js"></SCRIPT>

<SCRIPT language=javascript 
src="_mfc_cfile.3a3a.cfile.files/toolbar.js"></SCRIPT>

<SCRIPT language=javascript 
src="_mfc_cfile.3a3a.cfile.files/Broker.js"></SCRIPT>
<LINK href="_mfc_cfile.3a3a.cfile.files/dtue.css" type=text/css 
rel=stylesheet><LINK href="_mfc_cfile.3a3a.cfile.files/default.css" 
type=text/css rel=stylesheet>
<SCRIPT language=JavaScript><!--
   function BrowserData()
{
		this.userAgent = "Mozilla/4.0 (compatible; MSIE 6.0; Windows 98)";

		this.bot = false;

		this.browser = "MSIE";

		this.majorVer = 6;

		this.minorVer = "0";

		this.betaVer = "0";

		this.platform = "98";

		this.platVer = "0";

		this.getsNavBar = true;

		this.doesActiveX = true;

		this.doesPersistence = true;

		this.fullVer = 6;

   }

   var oBD = new BrowserData();

   //--></SCRIPT>

<SCRIPT>
	if( self == top )
{
	location = "/library/en-us/vclib/html/_mfc_cfile.3a3a.cfile.asp";
}

</SCRIPT>
<xml id=xmlPageContext><eyebrow findmenu="false">
	<item label="MSDN Home" url="/default.asp"/>
	<item label="MSDN Library" url="/library/default.asp"/>
	<item label="Development Tools and Languages" url="/library/en-us/dnanchor/html/vistoolsanchor.asp" id="msdnlib4" xmlsrc="/library/en-us/toc/msdnlib/msdnlib4_.xml"/><item label="Visual Studio .NET" url="/library/en-us/dnanchor/html/vsnetanchor.asp" id="msdnlib9"/><item label="Visual C++" url="/library/en-us/vcedit/html/vcorivisualcmainnode.asp" id="msdnlib13" xmlsrc="/library/en-us/toc/msdnlib/msdnlib13_.xml"/><item label="Reference" url="/library/en-us/vcedit/html/vcoriVisualCReferenceNode.asp" id="vclib2" xmlsrc="/library/en-us/toc/vclib/vclib2_.xml"/><item label="Visual C++ Libraries" url="/library/en-us/vclib/html/_vclibraries_home.asp" id="vclib3"/><item label="MFC Reference" url="/library/en-us/vclib/html/_mfc_Class_Library_Reference_Introduction.asp" id="vclib5586" xmlsrc="/library/en-us/toc/vclib/vclib5586_.xml"/><item label="MFC Classes" url="/library/en-us/vclib/html/vclrfMFCClassListing.asp" id="vclib5706" xmlsrc="/library/en-us/toc/vclib/vclib5706_.xml"/><item label="CFile Class" url="/library/en-us/vclib/html/_MFC_CFile.asp" id="vclib6923" xmlsrc="/library/en-us/toc/vclib/vclib6923_.xml"/><item label="Member Functions" url="/library/en-us/vclib/html/_MFC_member_functions_CFile.asp" id="vclib6925"/><item label="CFile::CFile" url="/library/en-us/vclib/html/_mfc_CFile.3a3a.CFile.asp" id="vclib6927"/></eyebrow></xml><!--VENUS_START-->
<META content=CFile::CFile name=MSHTOCTitle>
<META content="CFile::CFile (MFC)" name=MSHRLTitle>
<META content=_mfc_CFile.3a3a.CFile name=MSHKeywordA>
<META content="CFile class, construction/destruction" name=MSHKeywordK>
<META content="CFile class, constructor" name=MSHKeywordK>
<META content=CFile name=MSHKeywordF>
<META content=CFile.CFile name=MSHKeywordF>
<META content=CFile::CFile name=MSHKeywordF>
<META content=_mfc_CFile.3a3a.CFile name=MSHKeywordA>
<META content=DevLang:C name=MSHAttr>
<META content=DevLangVers:kbLangC name=MSHAttr>
<META content=DevLang:C++ name=MSHAttr>
<META content=DevLangVers:kbLangCPP name=MSHAttr>
<META content="DocSet:Visual C++" name=MSHAttr>
<META content="DocSet:Visual Studio" name=MSHAttr>
<META content=Product:VC name=MSHAttr>
<META content=ProductVers:kbVC700 name=MSHAttr>
<META content=TargetOSVers:kbWinOS name=MSHAttr>
<META content=Technology:MFC name=MSHAttr>
<META content=TechnologyVers:kbMFC name=MSHAttr>
<META content=TopicType:kbSyntax name=MSHAttr>
<META content=TargetOS:Windows name=MSHAttr>
<META content=Locale:kbEnglish name=MSHAttr><!---VENUS_END---><LINK 
href="_mfc_cfile.3a3a.cfile.files/css.aspx" type=text/css rel=stylesheet>
<SCRIPT language=javascript>
var doImage=doImage;var TType=TType;
function mhHover(tbl,idx,cls){var t,d;if(document.getElementById)t=document.getElementById(tbl);else t=document.all(tbl);if(t==null)return;if(t.getElementsByTagName)d=t.getElementsByTagName("TD");else d=t.all.tags("TD");if(d==null)return;if(d.length<=idx)return;d[idx].className=cls;}
function footerjs(doc){if(doImage==null){var tt=TType==null?"PV":TType;doc.write('<layer visibility="hide"><div style="display:none"><img src="http://c.microsoft.com/trans_pixel.asp?source=msdn&TYPE=' + tt + '&p=library_en-us_vclib_html__mfc&URI=%2flibrary%2ftoolbar%2f3.0%2fasp.aspx%3fmode%3dhead%26c%3d%2fnonlibraryshell.config%26h%3dmsdn%252Emicrosoft%252Ecom%26u%3d%252Flibrary%252Fen%252Dus%252Fvclib%252Fhtml%252F%255Fmfc%255Fcfile%252E3a3a%252Ecfile%252Easp%26r%3dhttp%253A%252F%252Fmsdn%252Emicrosoft%252Ecom%252Flibrary%252Fshared%252Fdeeptree%252Fasp%252Frightframe%252Easp%253Fdtcfg%253D%252Flibrary%252Fdeeptreeconfig%252Exml%2526url%253D%252Flibrary%252Fen%252Dus%252Fvclib%252Fhtml%252F%255Fmfc%255Fcfile%252E3a3a%252Ecfile%252Easp%253Fframe%253Dtrue%2526hidetoc%253Dfalse&GUID=1F4FC18C-F71E-47FB-8FC9-612F8EE59C61&r=http%3a%2f%2fmsdn.microsoft.com%2flibrary%2fshared%2fdeeptree%2fasp%2frightframe.asp%3fdtcfg%3d%2flibrary%2fdeeptreeconfig.xml%26url%3d%2flibrary%2fen-us%2fvclib%2fhtml%2f_mfc_cfile.3a3a.cfile.asp%3fframe%3dtrue%26hidetoc%3dfalse" width=0 height=0 hspace=0 vspace=0 border=0 /></div></layer>');}}
</SCRIPT>

<META content="MSHTML 6.00.2800.1491" name=GENERATOR></HEAD>
<BODY text=#000000 bgColor=#ffffff leftMargin=0 topMargin=0 MARGINWIDTH="0" 
MARGINHEIGHT="0">
<TABLE height=24 cellSpacing=0 cellPadding=4 width="100%" bgColor=#ffffff 
border=0>
  <TBODY>
  <TR>
    <TD class=eyebrow vAlign=center align=left width="100%">&nbsp;&nbsp; <A 
      class=small href="http://msdn.microsoft.com/default.asp" target=_top>MSDN 
      Home</A>&nbsp;&gt;&nbsp; <A class=small 
      href="http://msdn.microsoft.com/library/default.asp" target=_top>MSDN 
      Library</A>&nbsp;&gt;&nbsp; <A class=small 
      href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dnanchor/html/vistoolsanchor.asp" 
      target=_top>Development Tools and Languages</A>&nbsp;&gt;&nbsp; <A 
      class=small 
      href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dnanchor/html/vsnetanchor.asp" 
      target=_top>Visual Studio .NET</A>&nbsp;&gt;&nbsp; <A class=small 
      href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcedit/html/vcorivisualcmainnode.asp" 
      target=_top>Visual C++</A>&nbsp;&gt;&nbsp; <A class=small 
      href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcedit/html/vcoriVisualCReferenceNode.asp" 
      target=_top>Reference</A>&nbsp;&gt;&nbsp; <A class=small 
      href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vclib/html/_vclibraries_home.asp" 
      target=_top>Visual C++ Libraries</A>&nbsp;&gt;&nbsp; <A class=small 
      href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vclib/html/_mfc_Class_Library_Reference_Introduction.asp" 
      target=_top>MFC Reference</A>&nbsp;&gt;&nbsp; <A class=small 
      href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vclib/html/vclrfMFCClassListing.asp" 
      target=_top>MFC Classes</A>&nbsp;&gt;&nbsp; <A class=small 
      href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vclib/html/_MFC_CFile.asp" 
      target=_top>CFile Class</A>&nbsp;&gt;&nbsp; <A class=small 
      href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vclib/html/_MFC_member_functions_CFile.asp" 
      target=_top>Member Functions</A><A 
      href="http://msdn.microsoft.com/library/en-us/vclib/html/"></A> 
  </TD></TR></TBODY></TABLE>
<TABLE class=clsContainer style="TABLE-LAYOUT: fixed" cellSpacing=0 
cellPadding=15 width="100%" border=0 float="left">
  <TBODY>
  <TR>
    <TD vAlign=top><!--TOOLBAR_START--><!--TOOLBAR_EXEMPT--><!--TOOLBAR_END--><!-- Begin Content --><!--NONSCROLLING BANNER START-->
      <DIV id=nsbanner>
      <DIV id=bannerrow1>
      <TABLE class=bannerparthead cellSpacing=0>
        <TBODY>
        <TR id=hdr>
          <TD class=runninghead noWrap>MFC&nbsp;Library&nbsp;Reference</TD>
          <TD class=product noWrap>&nbsp;</TD></TR></TBODY></TABLE></DIV>
      <DIV id=TitleRow>
      <H1 class=dtH1><A 
      name=_mfc_cfile.3a3a.cfile></A>CFile::CFile</H1></DIV></DIV><!--NONSCROLLING BANNER END-->
      <DIV id=nstext valign="bottom">
      <DIV class=saveHistory id=allHistory onload="loadAll()" 
      onsave="saveAll()"></DIV><!-- Topic Status -->
      <P>The default constructor does not open a file but rather sets 
      <B>m_hFile</B> to <B>CFile::hFileNull</B>.</P><PRE class=syntax><B>CFile(</B> <B>);</B>
<B>CFile(</B>
<B>   HANDLE</B> <I>hFile</I> 
<B>);</B>
<B>CFile(</B>
<B>   LPCTSTR</B> <I>lpszFileName</I><B>,</B>
<B>   UINT</B> <I>nOpenFlags</I> 
<B>);</B></PRE>
      <H4 class=dtH4>Parameters</H4>
      <DL>
        <DT><I>hFile</I> 
        <DD>The <B>HFILE</B> returned from a previous call to <A 
        href="http://msdn.microsoft.com/library/en-us/fileio/base/createfile.asp">CreateFile</A>, 
        as described in the <I>Platform SDK</I>. 
        <DT><I>lpszFileName</I> 
        <DD>A string that is the path to the desired file. The path can be 
        relative or absolute. 
        <DT><I>nOpenFlags</I> 
        <DD>Sharing and access mode. Specifies the action to take when opening 
        the file. You can combine options listed below by using the bitwise-OR 
        (<B>|</B>) operator. One access permission and one share option are 
        required; the <B>modeCreate</B> and <B>modeNoInherit</B> modes are 
        optional. The values are as follows: 
        <UL type=disc>
          <LI><B>CFile::modeCreate</B>&nbsp;&nbsp;&nbsp;Directs the constructor 
          to create a new file. If the file exists already, it is truncated to 0 
          length. 
          <LI><B>CFile::modeNoTruncate</B>&nbsp;&nbsp;&nbsp;Combine this value 
          with <B>modeCreate</B>. If the file being created already exists, it 
          is not truncated to 0 length. Thus the file is guaranteed to open, 
          either as a newly created file or as an existing file. This might be 
          useful, for example, when opening a settings file that may or may not 
          exist already. This option applies to <B>CStdioFile</B> as well. 
          <LI><B>CFile::modeRead</B>&nbsp;&nbsp;&nbsp;Opens the file for reading 
          only. 
          <LI><B>CFile::modeReadWrite</B>&nbsp;&nbsp;&nbsp;Opens the file for 
          reading and writing. 
          <LI><B>CFile::modeWrite</B>&nbsp;&nbsp;&nbsp;Opens the file for 
          writing only. 
          <LI><B>CFile::modeNoInherit</B>&nbsp;&nbsp;&nbsp;Prevents the file 
          from being inherited by child processes. 
          <LI><B>CFile::shareDenyNone</B>&nbsp;&nbsp;&nbsp;Opens the file 
          without denying other processes read or write access to the file. 
          <B>Create</B> fails if the file has been opened in compatibility mode 
          by any other process. 
          <LI><B>CFile::shareDenyRead</B>&nbsp;&nbsp;&nbsp;Opens the file and 
          denies other processes read access to the file. <B>Create</B> fails if 
          the file has been opened in compatibility mode or for read access by 
          any other process. 
          <LI><B>CFile::shareDenyWrite</B>&nbsp;&nbsp;&nbsp;Opens the file and 
          denies other processes write access to the file. <B>Create</B> fails 
          if the file has been opened in compatibility mode or for write access 
          by any other process. 
          <LI><B>CFile::shareExclusive</B>&nbsp;&nbsp;&nbsp;Opens the file with 
          exclusive mode, denying other processes both read and write access to 
          the file. Construction fails if the file has been opened in any other 
          mode for read or write access, even by the current process. 
          <LI><B>CFile::shareCompat</B>&nbsp;&nbsp;&nbsp;This flag is not 
          available in 32 bit MFC. This flag maps to 
          <B>CFile::shareExclusive</B> when used in <B>CFile::Open</B>. 
          <LI><B>CFile::typeText</B>&nbsp;&nbsp;&nbsp;Sets text mode with 
          special processing for carriage return–linefeed pairs (used in derived 
          classes only). 
          <LI><B>CFile::typeBinary</B>&nbsp;&nbsp;&nbsp;Sets binary mode (used 
          in derived classes only). 
          <LI><B>CFile::osNoBuffer&nbsp;&nbsp;&nbsp;</B>See 
          <B>FILE_FLAG_NO_BUFFERING</B> in <A 
          href="http://msdn.microsoft.com/library/en-us/fileio/base/createfile.asp">CreateFile</A> 
          in the <I>Platform SDK</I>. 
          <LI><B>CFile::osWriteThrough&nbsp;&nbsp;&nbsp;</B>See 
          <B>FILE_FLAG_WRITE_THROUGH </B>in <B>CreateFile </B>in the <I>Platform 
          SDK</I>. 
          <LI><B>CFile::osRandomAccess&nbsp;&nbsp;&nbsp;</B>See 
          <B>FILE_FLAG_RANDOM_ACCESS</B> in <B>CreateFile</B> in the <I>Platform 
          SDK</I>. 
          <LI><B>CFile::osSequentialScan&nbsp;&nbsp;&nbsp;</B>See 
          <B>FILE_FLAG_SEQUENTIAL_SCAN</B> in <B>CreateFile</B> in the 
          <I>Platform SDK</I>. </LI></UL></DD></DL>
      <H4 class=dtH4>Remarks</H4>
      <P>Because this constructor does not throw an exception, it does not make 
      sense to use <B>TRY</B>/<B>CATCH</B> logic. Use the <B>Open</B> member 
      function, then test directly for exception conditions. For a discussion of 
      exception-processing strategy, see the article <A 
      href="http://msdn.microsoft.com/library/en-us/vccore/html/_core_Exception_Handling_Topics_.28.MFC.29.asp">Exceptions</A>.</P>
      <P>The constructor with one argument creates a <B>CFile</B> object that 
      corresponds to an existing operating-system file identified by 
      <I>hFile</I>. No check is made on the access mode or file type. When the 
      <B>CFile</B> object is destroyed, the operating-system file will not be 
      closed. You must close the file yourself. </P>
      <P>The constructor with two arguments creates a <B>CFile</B> object and 
      opens the corresponding operating-system file with the given path. This 
      constructor combines the functions of the first constructor and the 
      <B>Open</B> member function. It throws an exception if there is an error 
      while opening the file. Generally, this means that the error is 
      unrecoverable and that the user should be alerted.</P>
      <H4 class=dtH4>Example</H4>
      <P>For an example using the default constructor, see <A 
      href="http://msdn.microsoft.com/library/en-us/vclib/html/_mfc_cfile.3a3a.open.asp">CFile::Open</A>. 
      For an example using the constructor which throws exceptions, see <A 
      href="http://msdn.microsoft.com/library/en-us/vclib/html/_mfc_catch.asp">CATCH</A>. 
      </P>
      <P>The HANDLE constructor can be used as in the following code, which 
      creates a file named C:\MyFile.DAT and writes the ANSI characters "Hockey 
      is best!":</P><PRE class=code>HANDLE hFile = CreateFile(_T("C:\\MyFile.DAT"),
         GENERIC_WRITE, FILE_SHARE_READ,
         NULL, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, NULL);

   if (hFile == INVALID_HANDLE_VALUE)
      AfxMessageBox(_T("Couldn't create the file!"));
   else
   {
      // Attach a CFile object to the handle we have.
      CFile myFile(hFile);

      static const char sz[] = "Hockey is best!";

      // write string, without null-terminator
      myFile.Write(sz, lstrlen(sz));

      // We can call Close() explicitly, but the destructor would have
      // also closed the file for us. Note that there's no need to
      // call the CloseHandle() on the handle returned by the API because
      // MFC will close it for us.
      myFile.Close();
   }</PRE>
      <H4 class=dtH4>See Also</H4>
      <P><A 
      href="http://msdn.microsoft.com/library/en-us/vclib/html/_mfc_cfile.asp">CFile 
      Overview</A> | <A 
      href="http://msdn.microsoft.com/library/en-us/vclib/html/_mfc_cfile_class_members.asp">Class 
      Members</A> | <A 
      href="http://msdn.microsoft.com/library/en-us/vclib/html/_mfc_hierarchy_chart.asp">Hierarchy 
      Chart</A></P><!-- End Content --></DIV></TD></TR></TBODY></TABLE><BR 
style="OVERFLOW: hidden; LINE-HEIGHT: 1px" clear=all>
<TABLE id=msviFooter cellSpacing=0 cellPadding=0 width="100%">
  <TBODY>
  <TR vAlign=bottom>
    <TD id=msviFooter2 
    style="FILTER: progid:DXImageTransform.Microsoft.Gradient(startColorStr='#FFFFFF', endColorStr='#669AFF', gradientType='1')">
      <DIV id=msviLocalFooter><NOBR><A 
      href="http://go.microsoft.com/?linkid=317027">Manage Your Profile</A> 
      |</NOBR><WBR><NOBR><A 
      href="http://msdn.microsoft.com/isapi/gomscom.asp?target=/legal/" 
      target=_parent>Legal</A> |</NOBR><WBR><NOBR><A 
      href="http://go.microsoft.com/?linkid=2028439" target=_parent>Contact 
      Us</A> |</NOBR><WBR><NOBR><A href="http://msdn.microsoft.com/flash/" 
      target=_parent>MSDN Flash Newsletter</A></NOBR></DIV>
      <DIV id=msviGlobalFooter><SPAN dir=ltr>© 2005 Microsoft Corporation. All 
      rights reserved.&nbsp;</SPAN><NOBR><A 
      href="http://www.microsoft.com/info/cpyright.mspx">Terms of Use</A> 
      |</NOBR><WBR><NOBR><A 
      href="http://msdn.microsoft.com/library/toolbar/3.0/trademarks/en-us.mspx">Trademarks</A> 
      |</NOBR><WBR><NOBR><A 
      href="http://www.microsoft.com/info/privacy.mspx">Privacy 
      Statement</A></NOBR></DIV></TD>
    <TD width=105 bgColor=#669aff><IMG title="" height=29 alt=Microsoft 
      src="_mfc_cfile.3a3a.cfile.files/text.jpg" width=105 
  border=0></TD></TR></TBODY></TABLE>
<SCRIPT language=javascript>var msviFooter2;if (document.getElementById){msviFooter2 = document.getElementById("msviFooter2");msviFooter2.style.filter = "";}</SCRIPT>

<TABLE height=58 cellSpacing=0 cellPadding=0 width="100%">
  <TBODY>
  <TR vAlign=top>
    <TD>
      <DIV style="WIDTH: 200px"></DIV></TD>
    <TD 
    style="FILTER: progid:DXImageTransform.Microsoft.Gradient(startColorStr='#FFFFFF', endColorStr='#669AFF', gradientType='1')" 
    width="100%"></TD></TR></TBODY></TABLE>
<SCRIPT language=javascript>footerjs(document);</SCRIPT>
</BODY></HTML>
